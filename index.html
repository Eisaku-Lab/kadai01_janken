<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="js/jquery-2.1.3.min.js"></script>
  <link rel="stylesheet" href="css/sample.css">
  <title>じゃんけん</title>
</head>

<body>

  <header>
    <h1>限定じゃんけん
    </h1>
    <h5 class="subtitle">
      ルール：グー・チョキ・パーそれぞれ2回ずつ出せます<br>
      ★が0になった方の負けです
    </h5>
  </header>

  <main>
    <div class="game_status">
      <div>
        <h3 class="player_status">
          あなた ★：<span id="player_star">2</span><br>
          グー<span id="player_gu"> 2</span> チョキ<span id="player_cho"> 2</span> パー<span id="player_par"> 2</span>
        </h3>

      </div>
      <div>
        <h3 id="computer_status">
          コンピュータ ★：<span id="computer_star">2</span><br>
          グー<span id="computer_gu"> 2</span> チョキ<span id="computer_cho"> 2</span> パー<span id="computer_par"> 2</span>
        </h3>
      </div>
    </div>
    <ul>
      <li id="gu_btn"> <img src="./img/グー.jpg" class="gu_img" alt=""></li>
      <li id="cho_btn"> <img src="./img/チョキ.jpg" class="cho_img" alt=""></li>
      <li id="par_btn"><img src="./img/パー.jpg" class="par_img" alt=""></li>
    </ul>
    <div>
      <h3 id="computer_hand">
        コンピュータの出した手は？「<span id="pc_hands">なに？</span>」
      </h3>
    </div>
    <div id="judgment">じゃんけんの手を選んでください</div>

  </main>

  <footer></footer>
  <script>
    //じゃんけん用のSCRIPTを書いてください

    //星と手札//
    let playerStar = 2; //プレイヤーの星
    let computerStar = 2; //コンピュータの星
    let playcard = [0, 2, 2, 2] //プレイヤーのカード[使わない,グー,チョキ,パー]
    let computercard = [0, 2, 2, 2] //プレイヤーのカード[使わない,グー,チョキ,パー]


    //じゃんけんボタン押下//
    $("#gu_btn").on("click", function () { //グーボタンを押す//
      const g = 1; //プレイヤーの手グー

      const r = Math.ceil(Math.random() * 3); //1〜3のどれかの数字を生成
      if (computercard[1] >= 1 && r == 1) {
        $("#computer_hand").html('<img src="./img/グー.jpg" width="300" height="300">'); //1のきコンピュータはグー//
        $("#judgment").html("あいこ"); //結果はあいこ//
        playcard[1] = playcard[1] - 1;
        computercard[1] = computercard[1] - 1;
      }

      if (computercard[2] >= 1 && r == 2) {
        $("#computer_hand").html('<img src="./img/チョキ.jpg" width="300" height="300">');
        $("#judgment").html("勝ち");
        computerStar = computerStar - 1;
        playcard[1] = playcard[1] - 1;
        computercard[2] = computercard[2] - 1;
      }

      if (computercard[3] >= 1 && r == 3) {
        $("#computer_hand").html('<img src="./img/パー.jpg" width="300" height="300">');
        $("#judgment").html("負け");
        playerStar = playerStar - 1;
        playcard[1] = playcard[1] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //カードの消費
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //画面更新
      update();

    })

    $("#cho_btn").on("click", function () { //グーボタンを押す//
      const g = 2; //プレイヤーの手チョキ

      const r = Math.ceil(Math.random() * 3); //1〜3のどれかの数字
      if (computercard[1] >= 1 && r == 1) {
        $("#computer_hand").html('<img src="./img/グー.jpg" width="300" height="300">');
        $("#judgment").html("負け");
        playerStar = playerStar - 1;
        playcard[2] = playcard[2] - 1;
        computercard[1] = computercard[1] - 1;
      }
      if (computercard[2] >= 1 && r == 2) {
        $("#computer_hand").html('<img src="./img/チョキ.jpg" width="300" height="300">');
        $("#judgment").html("あいこ");
        playcard[2] = playcard[2] - 1;
        computercard[2] = computercard[2] - 1;
      }
      if (computercard[3] >= 1 && r == 3) {
        $("#computer_hand").html('<img src="./img/パー.jpg" width="300" height="300">');
        $("#judgment").html("勝ち");
        computerStar = computerStar - 1;
        playcard[2] = playcard[2] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //カードの消費
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //画面更新
      update();

    })

    $("#par_btn").on("click", function () { //グーボタンを押す//
      const g = 3; //プレイヤーの手パー

      const r = Math.ceil(Math.random() * 3); //1〜3のどれかの数字
      if (computercard[1] >= 1 && r == 1) {
        $("#computer_hand").html('<img src="./img/グー.jpg" width="300" height="300">');
        $("#judgment").html("勝ち");
        computerStar = computerStar - 1;
        playcard[3] = playcard[3] - 1;
        computercard[1] = computercard[1] - 1;
      }
      if (computercard[2] >= 1 && r == 2) {
        $("#computer_hand").html('<img src="./img/チョキ.jpg" width="300" height="300">');
        $("#judgment").html("負け");
        playerStar = playerStar - 1;
        playcard[3] = playcard[3] - 1;
        computercard[2] = computercard[2] - 1;
      }
      if (computercard[3] >= 1 && r == 3) {
        $("#computer_hand").html('<img src="./img/パー.jpg" width="300" height="300">');
        $("#judgment").html("あいこ");
        playcard[3] = playcard[3] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //カードの消費
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //画面更新
      update();

    })

    function update() {
      $("#player_star").text(playerStar);
      $("#computer_star").text(computerStar);

      // カードの残り枚数を表示
      $("#player_gu").text(playcard[1]);
      $("#player_cho").text(playcard[2]);
      $("#player_par").text(playcard[3]);

      $("#computer_gu").text(computercard[1]);
      $("#computer_cho").text(computercard[2]);
      $("#computer_par").text(computercard[3]);

      if (computerStar == 0) {
        $("#judgment").html("試合終了：あなたの勝利です");
        // alert("おめでとう！あなたの勝利です");
      }

      if (playerStar == 0) {
        $("#judgment").html("試合終了：あなたの負けです");
        // alert("残念！あなたの負けです");
      }

    }



  </script>
</body>

</html>